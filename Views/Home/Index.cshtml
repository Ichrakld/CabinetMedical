@{
    ViewData["Title"] = "Accueil";
}

<style>
    .hero-section {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 4rem 2rem;
        border-radius: 15px;
        margin-bottom: 3rem;
        text-align: center;
    }

    .stat-card {
        text-align: center;
        padding: 2rem;
        border-radius: 10px;
        background: white;
        transition: all 0.3s;
    }

        .stat-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

    .stat-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
    }

    .feature-card {
        border: none;
        border-radius: 15px;
        overflow: hidden;
        height: 100%;
    }

    .feature-icon {
        font-size: 2.5rem;
        color: #667eea;
    }
</style>

@if (User.Identity.IsAuthenticated)
{
    <div class="hero-section">
        <h1 class="display-4 mb-3">
            <i class="fas fa-hospital-user"></i> Bienvenue, @ViewBag.NomComplet
        </h1>
        <p class="lead">Tableau de bord - Gestion Cabinet Médical</p>
    </div>

    <div class="row mb-4">
        @if (User.IsInRole("ADMIN") || User.IsInRole("SECRETAIRE"))
        {
            <div class="col-md-3 mb-3">
                <div class="stat-card" style="border-left: 4px solid #667eea;">
                    <div class="stat-icon text-primary">
                        <i class="fas fa-user-injured"></i>
                    </div>
                    <h3 class="mb-0">@ViewBag.NbPatients</h3>
                    <p class="text-muted">Patients</p>
                </div>
            </div>
        }

        @if (User.IsInRole("ADMIN") || User.IsInRole("MEDECIN") || User.IsInRole("SECRETAIRE"))
        {
            <div class="col-md-3 mb-3">
                <div class="stat-card" style="border-left: 4px solid #198754;">
                    <div class="stat-icon text-success">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <h3 class="mb-0">@ViewBag.NbRdvAujourdhui</h3>
                    <p class="text-muted">RDV Aujourd'hui</p>
                </div>
            </div>
        }

        @if (User.IsInRole("ADMIN") || User.IsInRole("MEDECIN"))
        {
            <div class="col-md-3 mb-3">
                <div class="stat-card" style="border-left: 4px solid #0dcaf0;">
                    <div class="stat-icon text-info">
                        <i class="fas fa-stethoscope"></i>
                    </div>
                    <h3 class="mb-0">@ViewBag.NbConsultations</h3>
                    <p class="text-muted">Consultations</p>
                </div>
            </div>
        }

        @if (User.IsInRole("ADMIN"))
        {
            <div class="col-md-3 mb-3">
                <div class="stat-card" style="border-left: 4px solid #ffc107;">
                    <div class="stat-icon text-warning">
                        <i class="fas fa-user-md"></i>
                    </div>
                    <h3 class="mb-0">@ViewBag.NbMedecins</h3>
                    <p class="text-muted">Médecins</p>
                </div>
            </div>
        }
    </div>

    <div class="row">
        <h2 class="mb-4"><i class="fas fa-rocket"></i> Accès Rapide</h2>

        @if (User.IsInRole("ADMIN") || User.IsInRole("MEDECIN") || User.IsInRole("SECRETAIRE"))
        {
            <div class="col-md-4 mb-4">
                <div class="card feature-card">
                    <div class="card-body">
                        <div class="feature-icon mb-3">
                            <i class="fas fa-user-injured"></i>
                        </div>
                        <h5 class="card-title">Gestion des Patients</h5>
                        <p class="card-text">Consulter, ajouter et modifier les informations des patients</p>
                        <a href="@Url.Action("Index", "Patients")" class="btn btn-primary btn-custom">
                            <i class="fas fa-arrow-right"></i> Accéder
                        </a>
                    </div>
                </div>
            </div>
        }

        @if (User.IsInRole("ADMIN") || User.IsInRole("MEDECIN") || User.IsInRole("SECRETAIRE") || User.IsInRole("PATIENT"))
        {
            <div class="col-md-4 mb-4">
                <div class="card feature-card">
                    <div class="card-body">
                        <div class="feature-icon mb-3">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <h5 class="card-title">Rendez-vous</h5>
                        <p class="card-text">Gérer les rendez-vous et les plannings</p>
                        <a href="@Url.Action("Index", "RendezVous")" class="btn btn-success btn-custom">
                            <i class="fas fa-arrow-right"></i> Accéder
                        </a>
                    </div>
                </div>
            </div>
        }

        @if (User.IsInRole("ADMIN") || User.IsInRole("MEDECIN"))
        {
            <div class="col-md-4 mb-4">
                <div class="card feature-card">
                    <div class="card-body">
                        <div class="feature-icon mb-3">
                            <i class="fas fa-folder-open"></i>
                        </div>
                        <h5 class="card-title">Dossiers Médicaux</h5>
                        <p class="card-text">Accéder aux dossiers médicaux des patients</p>
                        <a href="@Url.Action("Index", "DossiersMedicaux")" class="btn btn-info btn-custom">
                            <i class="fas fa-arrow-right"></i> Accéder
                        </a>
                    </div>
                </div>
            </div>
        }

        @if (User.IsInRole("ADMIN"))
        {
            <div class="col-md-4 mb-4">
                <div class="card feature-card">
                    <div class="card-body">
                        <div class="feature-icon mb-3">
                            <i class="fas fa-user-md"></i>
                        </div>
                        <h5 class="card-title">Médecins</h5>
                        <p class="card-text">Gérer le personnel médical</p>
                        <a href="@Url.Action("Index", "Medecins")" class="btn btn-warning btn-custom">
                            <i class="fas fa-arrow-right"></i> Accéder
                        </a>
                    </div>
                </div>
            </div>

            <div class="col-md-4 mb-4">
                <div class="card feature-card">
                    <div class="card-body">
                        <div class="feature-icon mb-3">
                            <i class="fas fa-pills"></i>
                        </div>
                        <h5 class="card-title">Ressources Médicales</h5>
                        <p class="card-text">Gérer les ressources et équipements</p>
                        <a href="@Url.Action("Index", "RessourcesMedicales")" class="btn btn-danger btn-custom">
                            <i class="fas fa-arrow-right"></i> Accéder
                        </a>
                    </div>
                </div>
            </div>
        }
    </div>
}
else
{
    <div class="hero-section">
        <h1 class="display-3 mb-4">
            <i class="fas fa-hospital-alt"></i> Cabinet Médical
        </h1>
        <p class="lead mb-4">Système de gestion moderne et efficace pour votre cabinet</p>
        <div>
            <a href="@Url.Page("/Account/Login", new { area = "Identity" })" class="btn btn-light btn-lg me-2">
                <i class="fas fa-sign-in-alt"></i> Se connecter
            </a>
            <a href="@Url.Page("/Account/Register", new { area = "Identity" })" class="btn btn-outline-light btn-lg">
                <i class="fas fa-user-plus"></i> S'inscrire
            </a>
        </div>
    </div>

    <div class="row mt-5">
        <div class="col-md-4 mb-4">
            <div class="card feature-card text-center">
                <div class="card-body">
                    <div class="feature-icon mb-3">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <h5 class="card-title">Sécurisé</h5>
                    <p class="card-text">Vos données sont protégées avec les dernières technologies de sécurité</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card feature-card text-center">
                <div class="card-body">
                    <div class="feature-icon mb-3">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h5 class="card-title">Rapide</h5>
                    <p class="card-text">Interface intuitive pour une gestion efficace de votre cabinet</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card feature-card text-center">
                <div class="card-body">
                    <div class="feature-icon mb-3">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h5 class="card-title">Complet</h5>
                    <p class="card-text">Toutes les fonctionnalités nécessaires pour gérer votre cabinet</p>
                </div>
            </div>
        </div>
    </div>
}